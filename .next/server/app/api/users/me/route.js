"use strict";(()=>{var e={};e.id=847,e.ids=[847],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},8940:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>x});var t={};o.r(t),o.d(t,{GET:()=>g});var s=o(9303),n=o(8716),i=o(670),a=o(5349),u=o(1482),p=o.n(u);let c=e=>{try{let r=e.cookies.get("token")?.value||"";return p().verify(r,process.env.TOKEN_SECRET).id}catch(e){return console.error("Error decoding token:",e),null}};var d=o(839),l=o(7070);async function g(e){try{let r=c(e);if(!r)return l.NextResponse.json({error:"Unauthorized"},{status:401});let o=await d.Z.findOne({_id:r}).select("-password");if(!o)return l.NextResponse.json({error:"User not found"},{status:404});return l.NextResponse.json({message:"User found",data:o})}catch(e){return l.NextResponse.json({error:"Error fetching user data"},{status:500})}}(0,a.$)();let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/users/me/route",pathname:"/api/users/me",filename:"route",bundlePath:"app/api/users/me/route"},resolvedPagePath:"C:\\Users\\Abhisek Samal\\Desktop\\Ecoomerce_next\\src\\app\\api\\users\\me\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:f,staticGenerationAsyncStorage:x,serverHooks:v}=m,h="/api/users/me/route";function y(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:x})}},5349:(e,r,o)=>{o.d(r,{$:()=>n});var t=o(1185),s=o.n(t);async function n(){try{let e=process.env.MONGO_URI;if(console.log("MongoDB URI:",e),!e)throw Error("MONGO_URI is not defined in the environment variables");await s().connect(e);let r=s().connection;r.on("connected",()=>{console.log("MongoDB connected successfully")}),r.on("error",e=>{console.log(`MongoDB connection error. Please make sure MongoDB is running. ${e}`),process.exit(1)})}catch(e){console.log("Something went wrong"),console.log(e),process.exit(1)}}o(6636).config()},839:(e,r,o)=>{o.d(r,{Z:()=>i});var t=o(1185),s=o.n(t);let n=new(s()).Schema({username:{type:String,required:[!0,"Please provide a username"],unique:!0},email:{type:String,required:[!0,"Please provide an email"],unique:!0},password:{type:String,required:[!0,"Please provide a password"]},isVerified:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},forgotPasswordToken:String,forgotPasswordTokenExpiry:Date,verifyToken:String,verifyTokenExpiry:Date}),i=s().models.users||s().model("users",n)}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[948,972,695],()=>o(8940));module.exports=t})();